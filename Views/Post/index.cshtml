@using Markdig;
<link rel="stylesheet" href="~/css/post.css" />

@{
  ViewData["Title"] = Model.Title;
  ViewData["Url"] = $"{Config.Domain}/post/{Uri.EscapeDataString(Model.Title)}";
  ViewData["Image"] = $"{Config.Domain}/post/{Uri.EscapeDataString(Model.Title)}/{Model.Poster}";
}

@if(!string.IsNullOrEmpty(Model.Poster)){
<div class="hero">
    <img class="full-screen-width" src=@Model.Poster alt="Banner Image">
    <div class="hero-text">
        <h1>@Model.Title</h1>
    </div>
 </div>
 <div class="center date">
    <p>@Model.Date?.ToString("D")</p>
 </div>
}

@if (Config.Password != null && !User.Identity.IsAuthenticated)
{
<div  class="center" style="margin-bottom:8vh">
    <h1>Members only</h1>
    <p>You have to login to view the content of this page.</p>
    <button class="bnt-black" onclick="location.href='/login?ReturnUrl=/post/@Model.Title'" type="button">Login</button>
</div>
return;
}

<div>
    @{
     var pipeline = new MarkdownPipelineBuilder().UseYamlFrontMatter().UseAdvancedExtensions().Build();
    }
    @Html.Raw(Markdown.ToHtml(Model.Markdown, pipeline))
</div>

<div class="center">
    <a href="#top">
        <img style="height: 3vw;" src="/icon/arrow_up.svg">
    </a>
</div>
